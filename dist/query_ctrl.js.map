{"version":3,"sources":["../src/query_ctrl.js"],"names":["QueryCtrl","SkydiveDatasourceQueryCtrl","$scope","$injector","uiSegmentSrv","scope","target","metricField","metricFields","text","value","dedup","aggregates","mode","query","panelCtrl","refresh","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAQA,e,kBAAAA,S;;;;;;;;;;;;;;;;;;;;;4CAGKC,0B;;;AAEX,4CAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,YAA/B,EAA8C;AAAA;;AAAA,8JACtCF,MADsC,EAC9BC,SAD8B;;AAG5C,gBAAKE,KAAL,GAAaH,MAAb;AACA,gBAAKE,YAAL,GAAoBA,YAApB;;AAEA,gBAAKE,MAAL,CAAYC,WAAZ,GAA0B,OAA1B;;AAEA;AACA,gBAAKC,YAAL,GAAoB,CAClB,EAACC,MAAM,OAAP,EAAgBC,OAAO,OAAvB,EADkB,EAElB,EAACD,MAAM,SAAP,EAAkBC,OAAO,SAAzB,EAFkB,EAGlB,EAACD,MAAM,SAAP,EAAkBC,OAAO,SAAzB,EAHkB,EAIlB,EAACD,MAAM,SAAP,EAAkBC,OAAO,SAAzB,EAJkB,EAKlB,EAACD,MAAM,WAAP,EAAoBC,OAAO,WAA3B,EALkB,EAMlB,EAACD,MAAM,WAAP,EAAoBC,OAAO,WAA3B,EANkB,CAApB;;AASA,gBAAKJ,MAAL,CAAYK,KAAZ,GAAoB,KAApB;AACA,gBAAKA,KAAL,GAAa,CACX,EAACF,MAAM,KAAP,EAAcC,OAAO,KAArB,EADW,EAEX,EAACD,MAAM,YAAP,EAAqBC,OAAO,YAA5B,EAFW,EAGX,EAACD,MAAM,aAAP,EAAsBC,OAAO,aAA7B,EAHW,EAIX,EAACD,MAAM,YAAP,EAAqBC,OAAO,YAA5B,EAJW,EAKX,EAACD,MAAM,YAAP,EAAqBC,OAAO,YAA5B,EALW,EAMX,EAACD,MAAM,SAAP,EAAkBC,OAAO,SAAzB,EANW,EAOX,EAACD,MAAM,UAAP,EAAmBC,OAAO,UAA1B,EAPW,EAQX,EAACD,MAAM,UAAP,EAAmBC,OAAO,UAA1B,EARW,CAAb;;AAWA,gBAAKJ,MAAL,CAAYM,UAAZ,GAAyB,IAAzB;;AAEA,gBAAKN,MAAL,CAAYO,IAAZ,GAAmB,KAAnB;AACA,gBAAKA,IAAL,GAAY,CACV,EAACJ,MAAM,KAAP,EAAcC,OAAO,KAArB,EADU,EAEV,EAACD,MAAM,YAAP,EAAqBC,OAAO,OAA5B,EAFU,EAGV,EAACD,MAAM,YAAP,EAAqBC,OAAO,OAA5B,EAHU,CAAZ;AAjC4C;AAsC7C;;;;6CAEkB;AACjB,mBAAO,KAAKJ,MAAL,CAAYQ,KAAnB;AACD;;;6CAEkB;AACjB,iBAAKC,SAAL,CAAeC,OAAf;AACD;;;;QAhD6ChB,S;;;;AAmDhDC,iCAA2BgB,WAA3B,GAAyC,4BAAzC","file":"query_ctrl.js","sourcesContent":["import {QueryCtrl} from 'app/plugins/sdk';\nimport './css/query-editor.css!'\n\nexport class SkydiveDatasourceQueryCtrl extends QueryCtrl {\n\n  constructor($scope, $injector, uiSegmentSrv)  {\n    super($scope, $injector);\n\n    this.scope = $scope;\n    this.uiSegmentSrv = uiSegmentSrv;\n\n    this.target.metricField = \"Bytes\";\n\n    // TODO(safchain) request datasource to get metrics fields dynamically\n    this.metricFields = [\n      {text: \"Bytes\", value: \"Bytes\"},\n      {text: \"Packets\", value: \"Packets\"},\n      {text: \"ABBytes\", value: \"ABBytes\"},\n      {text: \"BABytes\", value: \"BABytes\"},\n      {text: \"ABPackets\", value: \"ABPackets\"},\n      {text: \"BAPackets\", value: \"BAPackets\"}\n    ];\n\n    this.target.dedup = \"---\";\n    this.dedup = [\n      {text: \"---\", value: \"---\"},\n      {text: \"LayersPath\", value: \"LayersPath\"},\n      {text: \"Application\", value: \"Application\"},\n      {text: \"TrackingID\", value: \"TrackingID\"},\n      {text: \"ParentUUID\", value: \"ParentUUID\"},\n      {text: \"NodeTID\", value: \"NodeTID\"},\n      {text: \"ANodeTID\", value: \"ANodeTID\"},\n      {text: \"BNodeTID\", value: \"BNodeTID\"}\n    ];\n\n    this.target.aggregates = true;\n\n    this.target.mode = 'All';\n    this.mode = [\n      {text: \"All\", value: \"All\"},\n      {text: \"Outer only\", value: \"Outer\"},\n      {text: \"Inner only\", value: \"Inner\"}\n    ];\n  }\n\n  getCollapsedText() {\n    return this.target.query;\n  }\n\n  onChangeInternal() {\n    this.panelCtrl.refresh();\n  }\n}\n\nSkydiveDatasourceQueryCtrl.templateUrl = 'partials/query.editor.html';\n"]}